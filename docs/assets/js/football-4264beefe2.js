class Penalty{constructor(e,n,t,s=[19],o=['loose','run','change'],a=5,l=['previous'],i=!1,r=!1,d=!1){this.name=e,this.types=n,this.who=t,this.signals=s,this.playTypes=o,this.distance=a,this.enforcementSpots=l,this.isLossOfDown=i,this.isAutomaticFirst=r,this.isDisqualification=d}}const quarters=['1st Quarter','2nd Quarter','3rd Quarter','4th Quarter','Overtime'],downs=['1st Down','2nd Down','3rd Down','4th Down','PAT'],pats=['1 PT','2 PTS','3 PTS'],looseResults=['Completed Pass (1st Down)','Completed Pass (Short)','Incomplete Pass','Touchdown','Interception'],runningResults=['Deflagged (1st Down)','Deflagged (1st Down)','Deflagged (Short)','Deflagged (Short)','Touchdown','Touchdown','Safety'],changeResults=['Deflagged','Touchdown','Deflagged','Touchdown','Touchback','Safety'],priorResults=['Received (Deflagged)','Received (Deflagged)','Touchdown','Muffed','Touchback'],patResults=['PAT Good','Incomplete','Deflagged (Short)','Intercepted'],penalties=[new Penalty('Failure to Wear Required Equipment',['live'],['offense','defense'],[23]),new Penalty('Delay of Game',['dead'],['offense'],[7,21]),new Penalty('Illegally Consuming Time',['dead','live'],['offense'],[19],['prior']),new Penalty('Illegal Substitution',['dead','live'],['offense','defense'],[22]),new Penalty('Illegal Procedure',['live'],['offense'],[19],['prior'],5,['previous','succeeding']),new Penalty('Encroachment',['dead'],['defense'],[7,18]),new Penalty('False Start',['dead'],['offense']),new Penalty('Illegal Snap',['dead'],['offense']),new Penalty('Disconcerting Act',['dead'],['defense'],[7,23]),new Penalty('Illegal Formation',['live'],['offense'],[19],['loose']),new Penalty('Illegal Motion',['live'],['offense'],[20],['loose']),new Penalty('Illegal Shift',['live'],['offense'],[20],['loose']),new Penalty('Illegal Advancement (Co-Rec)',['live'],['offense'],[19],['run']),new Penalty('Illegal Backward Pass',['live'],['offense'],[35,9],['run','change'],5,['spot'],!0),new Penalty('Illegal Forward Pass',['live'],['offense'],[35,9],['run','change'],5,['spot'],!0),new Penalty('Intentional Grounding',['live'],['offense'],[36,9],['loose'],5,['spot'],!0),new Penalty('Illegal Reception (Co-Rec)',['live'],['offense'],[19,9],['run'],5,['previous'],!0),new Penalty('Help the Runner',['live'],['offense'],[44],['run','change'],5,['spot']),new Penalty('Unsportsmanlike Conduct',['live','dead'],['offense','defense'],[7,27],['run','loose','change'],10,['succeeding']),new Penalty('Illegal Player Equipment',['dead'],['offense','defense'],[7,27],['run'],10,['succeeding']),new Penalty('Illegal Kick, Quick Punt',['live'],['offense'],[31],['run','change'],10),new Penalty('Kick Catching Interference',['live'],['kicking'],[33],['loose'],10,['spot']),new Penalty('Encroachment (2nd)',['dead'],['defense'],[7,18],['loose'],10),new Penalty('Pass Interference',['live'],['offense','defense'],[33],['loose'],10),new Penalty('Personal Foul, Strip or Attempt to Strip Ball',['live'],['defense'],[38],['run','change'],10,['spot']),new Penalty('Personal Foul, Hurdling',['live'],['offense'],[38],['run','change'],10,['spot']),new Penalty('Roughing the Passer',['live'],['defense'],[34,8],['loose'],10,['succeeding'],!1,!0),new Penalty('Personal Foul, Illegal Contact',['live'],['offense','defense'],[38],['run','change'],10,['spot']),new Penalty('Personal Foul, Interlocked Blocking',['live'],['offense'],[38,44],['run','change'],10,['spot']),new Penalty('Illegal Flag Belt Removal',['live'],['offense','defense'],[38],['run','loose','change'],10,['spot']),new Penalty('Flag Guarding',['live'],['offense'],[24],['run','change'],10,['spot']),new Penalty('Holding',['live'],['offense','defense'],[42],['run','loose','change'],10,['spot']),new Penalty('Illegal Batting',['live'],['offense'],[31],['run','loose','change'],10,['spot']),new Penalty('Illegal Kicking',['live'],['offense'],[31],['run','change'],10,['spot']),new Penalty('Illegal Participation',['live'],['offense','defense'],[28],['run','loose','change'],10,['previous']),new Penalty('Personal Foul, Tampering w/ Flag Belt',['dead'],['offense','defense'],[38,47,8,9],['run'],10,['previous','succeeding'],!0,!0,!0),new Penalty('Unsportsmanlike Conduct, Contacting an Official',['dead'],['offense','defense'],[7,27,47],['run'],10,['succeeding'],!1,!1,!0),new Penalty('Personal Foul, Tackling the Runner',['live'],['defense'],[38,47],['run','change'],10,['spot'],!1,!1,!0),new Penalty('Personal Foul, Fighting an Opponent',['dead'],['offense','defense'],[7,38,47],['run'],10,['succeeding'],!1,!1,!0)];function getRandom(e){return e[Math.floor(Math.random()*e.length)]}function getPlayType(e,n,t){let s=getRandom(e.playTypes);switch('Overtime'!==n&&'PAT'!==t||(s='loose'===s?'loose':'run'),s){case'loose':return'Loose Ball';case'change':return'After Change of Team Possession';case'prior':return'Prior to Change of Team Possession';default:return'Running Play'}}function getResult(e,n,t){let s;if('PAT'===t)s=getRandom(patResults);else switch(n){case'Loose Ball':s=getRandom(looseResults);break;case'After Change of Team Possession':s=getRandom(changeResults);break;case'Prior to Change of Team Possession':s=getRandom(priorResults);break;default:s=getRandom(runningResults)}return e.name.toLowerCase().includes('grounding')?s='Incomplete Pass':e.name.toLowerCase().includes('consuming')?s=getRandom(['Received','Muffed']):e.name.toLowerCase().includes('illegal kick')&&(s=getRandom(['Fumble','Intercepted'])),s}function getRandomClockTime(){const e=Math.floor(719*Math.random())+1;return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,'0')}`}function isUnderTwoMinutes(e){const[n,t]=e.split(':');return 60*parseInt(n)+parseInt(t)<=120}function getSignals(e,n,t,s){return e.isAutomaticFirst&&'defense'===s?e.signals.filter(e=>9!==e):'After Change of Team Possession'===t?e.signals.filter(e=>9!==e):e.isLossOfDown&&'defense'!==s?e.signals.filter(e=>8!==e):'live'===n?e.signals.filter(e=>7!==e):e.signals}function getRandomWho(e,n){let t=getRandom(e.who);return t}function getRandomNum(){return Math.floor(99*Math.random())+1}const gameManager={playHistory:[],recentPenalties:[],penalty:null,quarter:'',clockTime:'',down:'',patPoints:'',penaltyType:'',playType:'',who:'',playerNumber:0,result:'',enforcementSpot:'',mode:'training',revealed:!1,init(){this.generate()},generate(){let e;this.penalty&&(this.playHistory.push({penalty:this.penalty,quarter:this.quarter,clockTime:this.clockTime,down:this.down,patPoints:this.patPoints,penaltyType:this.penaltyType,playType:this.playType,who:this.who,playerNumber:this.playerNumber,result:this.result,enforcementSpot:this.enforcementSpot,mode:this.mode,revealed:this.revealed}),this.playHistory.length>5&&this.playHistory.shift());let n=0;do{e=getRandom(penalties),n++}while(this.recentPenalties.includes(e.name)&&n<100);this.recentPenalties.push(e.name),this.recentPenalties.length>15&&this.recentPenalties.shift(),this.penalty=e,this.quarter=getRandom(quarters),this.clockTime=getRandomClockTime(),this.down=getRandom(downs),this.patPoints=getRandom(pats),this.penaltyType=getRandom(this.penalty.types),this.playType=getPlayType(this.penalty,this.quarter,this.down),this.who=getRandomWho(this.penalty,this.quarter),this.playerNumber=getRandomNum(),this.result=getResult(this.penalty,this.playType,this.down),this.enforcementSpot=getRandom(this.penalty.enforcementSpots),this.revealed=!1},undo(){if(this.playHistory.length>0){const e=this.playHistory.pop();e&&(this.penalty=e.penalty,this.quarter=e.quarter,this.clockTime=e.clockTime,this.down=e.down,this.patPoints=e.patPoints,this.penaltyType=e.penaltyType,this.playType=e.playType,this.who=e.who,this.playerNumber=e.playerNumber,this.result=e.result,this.enforcementSpot=e.enforcementSpot,'practice'===this.mode?this.revealed=!1:this.revealed=e.revealed)}},get hasHistory(){return this.playHistory.length>0},toggleMode(){this.mode='training'===this.mode?'practice':'training','practice'===this.mode&&(this.revealed=!1)},reveal(){this.revealed=!0}};